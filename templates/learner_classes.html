{% extends 'base.html' %}
{% block title %}My Classes (Learner){% endblock %}
{% block content %}
<h1>My Classes</h1>
<h2>Upcoming</h2>
<table border="1" cellpadding="6" cellspacing="0" style="width:100%; border-collapse:collapse;">
  <thead><tr><th>Date</th><th>Time</th><th>Grade</th><th>Coach</th><th></th></tr></thead>
  <tbody>
    {% for b in bookings %}
      <tr>
        <td>{{ b.lesson.lesson_date }}</td>
        <td>{{ b.lesson.time_slot }}</td>
        <td>{{ b.lesson.grade_level }}</td>
        <td>{{ b.lesson.coach.first_name }} {{ b.lesson.coach.last_name }}</td>
        <td>
          <form action="{{ url_for('portal.cancel_booking', booking_id=b.id) }}" method="post" style="display:inline;">
            <button type="submit">Cancel</button>
          </form>
        </td>
      </tr>
    {% endfor %}
    {% if not bookings %}
      <tr><td colspan="5">No upcoming bookings.</td></tr>
    {% endif %}
  </tbody>
    </table>
<h2 style="margin-top:1rem;">Past</h2>
<table border="1" cellpadding="6" cellspacing="0" style="width:100%; border-collapse:collapse;">
  <thead><tr><th>Date</th><th>Time</th><th>Grade</th><th>Coach</th><th>Review</th></tr></thead>
  <tbody>
    {% for b in past_bookings %}
      <tr>
        <td>{{ b.lesson.lesson_date }}</td>
        <td>{{ b.lesson.time_slot }}</td>
        <td>{{ b.lesson.grade_level }}</td>
        <td>{{ b.lesson.coach.first_name }} {{ b.lesson.coach.last_name }}</td>
        <td>
          <a href="{{ url_for('portal.review_booking', booking_id=b.id) }}">{% if b.review %}Edit review{% else %}Review{% endif %}</a>
        </td>
      </tr>
    {% endfor %}
    {% if not past_bookings %}
      <tr><td colspan="5">No past classes.</td></tr>
    {% endif %}
  </tbody>
</table>
{% endblock %}
